<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel de Municípios</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
        th { background-color: #f4f4f4; }
        .expandable-content { display: none; }
        .expand-btn { cursor: pointer; background-color: #007bff; color: white; border: none; padding: 5px 10px; border-radius: 5px; }
        .expand-btn:hover { background-color: #0056b3; }
        #map { height: 500px; width: 100%; margin-top: 20px; }
    </style>
    <script>
        function toggleRow(id) {
            let row = document.getElementById(id);
            row.style.display = row.style.display === "none" ? "table-row" : "none";
        }
    </script>
</head>
<body>
    <h2>Painel de Municípios</h2>
    <div id="map"></div>
    <table>
        <thead>
            <tr>
                <th>Adesão Municipal</th>
                <th>Município</th>
                <th>Ações</th>
                <th>Plano municipal</th>
                <th>Unidade gestora</th>
                <th>Conselho municipal</th>
                <th>Indicador</th>
            </tr>
        </thead>
        <tbody id="municipios-body"></tbody>
    </table>
    <script>
        const municipios = [
            { nome: "São Paulo", lat: -23.5505, lng: -46.6333 },
            { nome: "Rio de Janeiro", lat: -22.9068, lng: -43.1729 },
            { nome: "Belo Horizonte", lat: -19.9167, lng: -43.9345 }
        ];

        municipios.forEach((municipio, index) => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td><button class="expand-btn" onclick="toggleRow('adesao-${index}')">Adesão</button></td>
                <td>${municipio.nome}</td>
                <td><button class="expand-btn" onclick="toggleRow('actions-${index}')">Ações</button></td>
                <td>✅ Sim</td>
                <td>✅ Sim</td>
                <td>✅ Sim</td>
                <td>0.85</td>
            `;
            document.getElementById('municipios-body').appendChild(row);

            const adesaoRow = document.createElement('tr');
            adesaoRow.id = `adesao-${index}`;
            adesaoRow.className = "expandable-content";
            adesaoRow.innerHTML = `<td colspan="7">Data de adesão: 01/01/2022 - Unidade gestora: Secretaria Municipal de Educação</td>`;
            document.getElementById('municipios-body').appendChild(adesaoRow);

            const actionsRow = document.createElement('tr');
            actionsRow.id = `actions-${index}`;
            actionsRow.className = "expandable-content";
            actionsRow.innerHTML = `
                <td colspan="7">
                    <table>
                        <tr>
                            <th>Nome da Iniciativa</th>
                            <th>Descrição da Iniciativa</th>
                            <th>Situação da Iniciativa</th>
                        </tr>
                        <tr>
                            <td>Capacitação de gestores</td>
                            <td>Meta: Formação de 100 gestores - Prazo: 2024 - Proponente: Secretaria Municipal de Educação</td>
                            <td>Em execução</td>
                        </tr>
                    </table>
                </td>
            `;
            document.getElementById('municipios-body').appendChild(actionsRow);
        });
    </script>
</body>
</html>
